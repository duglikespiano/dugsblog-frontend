---
import { Icon } from 'astro-icon/components';
---

<div class="button-container" data-button-container>
	<span class="menu menu1" data-menu>menu1</span>
	<span class="menu menu2" data-menu>menu2</span>
	<span class="menu menu3" data-menu>menu3</span>
	<button class="button">
		<Icon class="button active" data-button="to-open" name="tabler:list" data-nav-menu-close-button />
		<Icon class="button" data-button="to-close" name="tabler:x" data-nav-menu-open-button />
	</button>
</div>

<script>
	const buttonContainer = document.querySelector('[data-button-container]');
	const menuButtons = document.querySelectorAll('[data-menu]');

	const buttonToggler = (boolean: boolean | null) => {
		const buttonToOpen = document.querySelector('[data-button="to-open"]');
		const buttonToClose = document.querySelector('[data-button="to-close"]');
		const buttons = document.querySelectorAll('[data-button]');

		if (buttonToOpen && buttonToClose && buttons && buttonContainer) {
			buttons.forEach((element) => {
				element.classList.remove('active');
			});

			if (boolean === null && buttonContainer) {
				buttonContainer.classList.toggle('active');
				if (buttonContainer.classList.contains('active')) {
					buttonToClose.classList.add('active');
				} else {
					buttonToOpen.classList.add('active');
				}
				return;
			}

			if (boolean) {
				buttonToClose.classList.add('active');
				buttonContainer.classList.add('active');
			} else {
				buttonToOpen.classList.add('active');
				buttonContainer.classList.remove('active');
			}
		}
	};

	buttonContainer!.querySelector('.button')!.addEventListener('click', () => buttonToggler(null));

	menuButtons.forEach((button) => {
		button.addEventListener('click', () => {
			buttonToggler(false);
		});
	});
</script>

<style>
	.button-container {
		position: fixed;
		width: 300px;
		height: 300px;
		bottom: 100px;
		right: 100px;
		border-radius: 50%;
		transition: 0.2s linear all;
	}

	.button-container.showing {
		opacity: 1;
		z-index: 1;
	}

	.button-container .button {
		width: 100%;
		height: 100%;
		border-radius: 50%;
		text-align: center;
		font-size: 50px;
		bottom: 100px;
		right: 100px;
		cursor: pointer;
		border: none;
	}

	.button-container .menu {
		display: flex;
		position: absolute;
		width: 100px;
		height: 100px;
		top: 50%;
		left: 50%;
		font-size: 30px;
		justify-content: center;
		align-items: center;
		border: 1px solid black;
		border-radius: 50%;
		opacity: 0;
		transform: translate(-50%, -50%);
		transition: 0.3s all linear;
		z-index: -1;
		cursor: pointer;
	}

	.button-container.active .menu1 {
		top: -30%;
		opacity: 1;
		z-index: 1;
	}

	.button-container.active .menu2 {
		top: -10%;
		left: -10%;
		opacity: 1;
		z-index: 1;
	}

	.button-container.active .menu3 {
		left: -30%;
		opacity: 1;
		z-index: 1;
	}

	.button svg {
		position: absolute;
		top: 50%;
		left: 50%;
		width: 100px;
		height: 100px;
		transform: translate(-50%, -50%);
		opacity: 0;
		transition: 0.3s all linear;
	}

	.button svg.active {
		opacity: 1;
	}

	.menu-indicator {
		font-size: 100px;
		margin: 0;
		margin-top: 200px;
	}
</style>
