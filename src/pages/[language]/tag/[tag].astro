---
import RootLayout from "../../../layouts/RootLayout.astro";
import { getCollection } from "astro:content";
import Posts from "../../../components/blog/Posts.astro";
import type { Languages } from "../../../common/types";
import { printPageTitle } from "../../../common/functions";
const { language } = Astro.params as { language: Languages };

const posts = await getCollection(`${language}Posts`);
const title = printPageTitle(Astro.url.pathname, language);
const tagsPropsArray: string[] = [];

posts.forEach((post) => {
  post.data.tags.forEach((tag) => {
    tagsPropsArray.push(tag);
  });
});
const filteredTagsPropsArray = [...new Set(tagsPropsArray)];
---

<RootLayout title={title}>
  <Posts posts={posts} language={language} tagsPropsArray={filteredTagsPropsArray} />
</RootLayout>
