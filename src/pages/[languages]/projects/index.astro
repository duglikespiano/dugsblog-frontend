---
import type { GetStaticPaths } from 'astro';
import Layout from '../../../layouts/Layout.astro';
import SkillsFilter from '../../../components/projects/SkillsFilter.tsx';
import Projects from '../../../components/projects/Projects.tsx';
import { projects } from '../../../common/variables';
import { skillsOriginalStore, skillsSelectedStore } from '../../../common/stores';

export const getStaticPaths = (() => {
	return [{ params: { languages: 'en' } }, { params: { languages: 'ko' } }, { params: { languages: 'ja' } }];
}) satisfies GetStaticPaths;

const skillsSet = new Set();
projects.forEach((project) => {
	project.skills.forEach((skill) => {
		skillsSet.add(skill);
	});
});
const skillsArray: string[] = Array.from(skillsSet as Set<string>);
skillsOriginalStore.set(skillsArray);
console.log(skillsSelectedStore.get());

const skillProps = skillsOriginalStore.get() as string[];
skillsSelectedStore.subscribe((param) => {
	console.log(param);
});
---

<Layout>
	<SkillsFilter skillsArray={skillProps} client:load />
	<Projects client:load />
</Layout>
